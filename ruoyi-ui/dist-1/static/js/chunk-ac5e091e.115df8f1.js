(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac5e091e"],{"0889":function(e,t,r){},"2f72":function(e,t,r){"use strict";r("0889")},c720:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"register-body"},[r("i",{staticClass:"el-icon-back",on:{click:e.goToLogin}}),r("p",{staticClass:"title"},[e._v("注册账户")]),r("p",{staticClass:"sub-title"},[e._v("邮箱")]),r("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.rules}},[r("el-form-item",{attrs:{prop:"email",label:""}},[r("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),r("el-form-item",{attrs:{label:"",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}},[r("el-button",{attrs:{slot:"suffix",type:"text"},on:{click:e.getCode},slot:"suffix"},[e._v(e._s(e.codeInput))])],1)],1),r("el-form-item",{attrs:{label:"",prop:"pass"}},[r("el-input",{attrs:{type:"password",autocomplete:"on",placeholder:"登录密码","show-password":""},model:{value:e.registerForm.pass,callback:function(t){e.$set(e.registerForm,"pass",t)},expression:"registerForm.pass"}})],1),r("el-form-item",{attrs:{label:"",prop:"rePass"}},[r("el-input",{attrs:{type:"password",autocomplete:"on",placeholder:"登录密码","show-password":""},model:{value:e.registerForm.rePass,callback:function(t){e.$set(e.registerForm,"rePass",t)},expression:"registerForm.rePass"}})],1),e.captchaEnabled?r("el-form-item",{attrs:{prop:"validCode"}},[r("el-input",{staticStyle:{width:"63%"},attrs:{"auto-complete":"off",placeholder:"验证码"},model:{value:e.registerForm.validCode,callback:function(t){e.$set(e.registerForm,"validCode",t)},expression:"registerForm.validCode"}},[r("svg-icon",{staticClass:"el-input__icon input-icon",attrs:{slot:"prefix","icon-class":"validCode"},slot:"prefix"})],1),r("div",{staticClass:"register-code"},[r("img",{staticClass:"register-code-img",attrs:{src:e.codeUrl},on:{click:e.getVerifyCode}})])],1):e._e(),r("el-form-item",{attrs:{label:"",prop:"reCode"}},[r("el-input",{attrs:{placeholder:"请输入推荐码（必填）"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleRegister(t)}},model:{value:e.registerForm.reCode,callback:function(t){e.$set(e.registerForm,"reCode",t)},expression:"registerForm.reCode"}})],1)],1),r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.handleRegister}},[e._v("注册")])],1)},i=[],o=(r("d9e2"),r("14d9"),r("7ded")),a={data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请再次输入密码")):r!==e.registerForm.pass?s(new Error("两次输入密码不一致!")):s()};return{loading:!1,registerForm:{email:"",code:"",pass:"",rePass:"",validCode:"",reCode:"",uuid:"",mailUuid:""},rules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],code:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}],pass:[{required:!0,message:"请输入登录密码",trigger:"blur"}],rePass:[{validator:t,trigger:"blur"}],validCode:[{required:!0,message:"请输入验证码",trigger:"blur"}],reCode:[{required:!0,message:"请输入推荐码",trigger:"blur"}]},codeUrl:"",codeDisabled:!1,codeInput:"获取验证码",captchaEnabled:!0,time:60}},created:function(){this.getVerifyCode()},methods:{getVerifyCode:function(){var e=this;Object(o["b"])().then((function(t){e.captchaEnabled=void 0===t.captchaEnabled||t.captchaEnabled,e.captchaEnabled&&(e.codeUrl="data:image/gif;base64,"+t.img,e.registerForm.uuid=t.uuid)}))},getCode:function(){var e=this;Object(o["a"])(this.registerForm).then((function(t){console.log(t.uuid),e.registerForm.mailUuid=t.uuid,e.$message("邮件发送成功")})),this.time=60,this.codeInput=this.time+"s",this.codeDisabled=!0;var t=setInterval((function(){e.time--,e.codeInput=e.time+"s"}),1e3);setTimeout((function(){e.time=0,e.codeInput="再次发送",e.codeDisabled=!1,clearInterval(t),t=null}),61e3)},goToLogin:function(){this.$router.push("login")},handleRegister:function(){var e=this;this.$refs.registerForm.validate((function(t){if(t){e.loading=!0;var r=e.registerForm.username;Object(o["f"])(e.registerForm).then((function(t){e.$alert("<font color='red'>恭喜你，您的账号 "+r+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then((function(){e.$router.push("/login")})).catch((function(){}))})).catch((function(){e.loading=!1,e.captchaEnabled&&e.getVerifyCode()}))}}))}}},l=a,n=(r("2f72"),r("2877")),c=Object(n["a"])(l,s,i,!1,null,"a8b5341e",null);t["default"]=c.exports}}]);