(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71f6dc22"],{"78a3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAABLklEQVQ4T+3Uv0vDQBwF8Pdiq6Pg2tXRQV118T8QF3d/gAh6tl7BzeokptokCGIn126OLu5uDq6Cg+Ik1LHQJk86FFrImQhdBG88jg98f7wjxnw4Zg9/Fqx5+4fTET0u/dQSCa/dwuTm9dlue/AuteQd689NsfgMIRD45USpIyAxkV9pukDuV8NZKF4gvVYMLSspvg+DnFD36nzvo39nbNAWWYt8E6aCxgZNENvZk09OQ79ynA1WgycBjz3oxoUWAEuxFNYPVvKB4l1UNycu0NigAWD+H3RMuT+UPD0kViXeImsPTU5QwBaJF0lvHcUbzQv7mb6HOcHBlNM2YSR6xjYeAC6CcMZNwgyg+6heXs8Ey+XLUlzgGuB57rQkvU4St4bLHIlmdsx+92LsH+w3KmDNFa+rDwkAAAAASUVORK5CYII="},"7dee":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"pc"},[r("div",{staticClass:"pc_back",on:{click:e.handleBack}},[r("i",{staticClass:"el-icon-back"}),e._v(" 谷歌验证器 ")]),r("p",{staticClass:"word1"},[e._v("请下载谷歌验证应用程序并扫描二维码")]),r("div",{attrs:{id:"qrCode5"}},[r("canvas",{ref:"qrcode"})]),r("p",{staticClass:"code"},[e._v(" "+e._s(e.code2fa)+" "),r("img",{attrs:{src:o("78a3")}})]),r("button",{staticClass:"button0",on:{click:e.gotobindGoogle}},[e._v("继续")]),r("button",{staticClass:"button1",on:{click:e.gotoDown}},[e._v("下载谷歌验证器")]),r("el-dialog",{attrs:{title:"安全验证",visible:e.visible,width:e.isMobile?"90%":"25%",center:""},on:{"update:visible":function(t){e.visible=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top"}},[r("el-form-item",{attrs:{label:"",prop:"verifyCode",rules:[{required:!0,message:"请输入验证码",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"邮箱验证码"},model:{value:e.form.verifyCode,callback:function(t){e.$set(e.form,"verifyCode",t)},expression:"form.verifyCode"}},[r("el-button",{attrs:{slot:"suffix",type:"text",disabled:e.codeDisabled},on:{click:e.getCode},slot:"suffix"},[e._v(" "+e._s(e.codeInput)+" ")])],1)],1),r("el-form-item",{attrs:{label:"",prop:"confirm2fa",rules:[{required:!0,message:"请输入验证码",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"谷歌验证码"},model:{value:e.form.confirm2fa,callback:function(t){e.$set(e.form,"confirm2fa",t)},expression:"form.confirm2fa"}},[r("el-button",{attrs:{slot:"suffix",type:"text"},slot:"suffix"},[e._v(" 如何获取？ ")])],1)],1)],1),r("div",{staticStyle:{"text-align":"center"}},[r("el-button",{staticStyle:{width:"50%"},attrs:{type:"primary"},on:{click:e.bindGoogle}},[e._v(" 确 认 ")])],1)],1)],1)},n=[],i=o("5530"),s=(o("14d9"),o("2f62")),a=o("d055"),c=o.n(a),u=o("c0c7"),d=o("7ded"),l={data:function(){return{visible:!1,codeDisabled:!1,code2fa:"",form:{verifyCode:"",confirm2fa:"",codeText2fa:"",uuid:""},codeInput:"获取验证码",time:60}},created:function(){this.get2faCode()},computed:Object(i["a"])({},Object(s["b"])(["isMobile"])),methods:{handleBack:function(){this.$router.push("/home/user/security")},gotobindGoogle:function(){this.visible=!0},bindGoogle:function(){var e=this;Object(u["j"])(this.form).then((function(t){e.$message(t.msg),e.$router.push("/home/user/security")}))},get2faCode:function(){var e=this;Object(u["f"])().then((function(t){e.code2fa=t.code2fa,e.form.codeText2fa=t.code2fa,e.generateQRCode()}))},generateQRCode:function(){c.a.toCanvas(this.$refs.qrcode,this.code2fa,(function(e){e&&console.error(e)}))},getCode:function(){var e=this;Object(d["a"])().then((function(t){e.form.uuid=t.uuid,e.$message("邮件发送成功")})),this.time=60,this.codeInput=this.time+"s",this.codeDisabled=!0;var t=setInterval((function(){e.time--,e.codeInput=e.time+"s"}),1e3);setTimeout((function(){e.time=0,e.codeInput="再次发送",e.codeDisabled=!1,clearInterval(t),t=null}),61e3)},gotoDown:function(){this.$router.push("/home/user/google-authenticator")}}},f=l,m=(o("aa75"),o("2877")),p=Object(m["a"])(f,r,n,!1,null,"49af14b2",null);t["default"]=p.exports},aa75:function(e,t,o){"use strict";o("d039f")},c0c7:function(e,t,o){"use strict";o.d(t,"k",(function(){return n})),o.d(t,"h",(function(){return i})),o.d(t,"f",(function(){return s})),o.d(t,"j",(function(){return a})),o.d(t,"n",(function(){return c})),o.d(t,"o",(function(){return u})),o.d(t,"p",(function(){return d}));var r=o("b775");o("c38a");function n(e,t){var o={userId:e,password:t};return Object(r["a"])({url:"/system/user/resetPwd",method:"put",data:o})}function i(){return Object(r["a"])({url:"/system/user/profile",method:"get"})}function s(){return Object(r["a"])({url:"/system/user/profile/getGoogle2fa",method:"get"})}function a(e){return Object(r["a"])({url:"/system/user/profile/reset2fa",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/system/user/profile",method:"put",data:e})}function u(e){return Object(r["a"])({url:"/system/user/profile/resetPwd",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/system/user/profile/avatar",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e})}},d039f:function(e,t,o){}}]);